<!DOCTYPE html>
<html lang="ko" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Irev Official</title>

<style>
  :root{
    --bg-img: url("bg-space.jpg");
    --kv-img: url("keyvisual.jpg"); /* ÏóÜÏúºÎ©¥ ÏûêÎèôÏúºÎ°ú Í∑∏ÎùºÎç∞Ïù¥ÏÖòÎßå Î≥¥ÏûÑ */

    --bg:#050611;
    --bg2:#090a18;

    --card: rgba(14, 14, 28, 0.62);
    --stroke: rgba(188,166,255,0.20);

    --text:#f3e9ef;
    --sub: rgba(243,233,239,0.72);

    --a:#ff67bb;
    --b:#bca6ff;
    --c:#ff9fd3;

    --shadow: 0 18px 70px rgba(0,0,0,0.46);
    --radius: 22px;

    --blur: 14px;
    --dim: 0.16;

    --max: 1120px;

    --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    --sans: system-ui, -apple-system, "Poppins","Noto Sans KR","Noto Sans JP", sans-serif,
            "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
  }

  html[data-theme="light"]{
    --bg:#ffffff;
    --bg2:#fff4f9;
    --card: rgba(255,255,255,0.76);
    --stroke: rgba(255,182,217,0.48);
    --text:#2f242b;
    --sub: rgba(47,36,43,0.62);
    --shadow: 0 18px 60px rgba(255,137,195,0.20);
    --dim: 0.26;
  }

  *{ box-sizing:border-box; }
  html,body{ height:100%; }
  body{
    margin:0;
    font-family: var(--sans);
    color: var(--text);
    background: radial-gradient(900px 520px at 20% 10%, rgba(255,103,187,0.14), transparent 60%),
                radial-gradient(900px 520px at 85% 30%, rgba(188,166,255,0.14), transparent 60%),
                linear-gradient(180deg, var(--bg), var(--bg2));
    overflow-x:hidden;
  }

  /* Background layers */
  body::before{
    content:"";
    position:fixed;
    inset:0;
    background-image: var(--bg-img);
    background-size: cover;
    background-position:center;
    background-repeat:no-repeat;
    opacity: 1;
    z-index:-3;
  }
  body::after{
    content:"";
    position:fixed;
    inset:0;
    background: rgba(0,0,0,var(--dim));
    z-index:-2;
  }
  .noise{
    position:fixed;
    inset:-30%;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.18'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
    opacity: .26;
    pointer-events:none;
    z-index:-1;
  }

  /* Loader */
  #loader{
    position:fixed;
    inset:0;
    display:grid;
    place-items:center;
    background: radial-gradient(700px 420px at 50% 40%, rgba(255,103,187,0.18), transparent 60%),
                linear-gradient(180deg, rgba(3,4,10,0.92), rgba(3,4,10,0.86));
    z-index:9999;
    transition: opacity .45s ease, visibility .45s ease;
  }
  #loader.hide{ opacity:0; visibility:hidden; }
  .loader-inner{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:12px;
    text-transform:uppercase;
    letter-spacing: .24em;
    font-weight: 900;
  }
  .loader-bar{
    width:min(340px, 72vw);
    height: 2px;
    background: rgba(255,255,255,0.14);
    border-radius: 999px;
    overflow:hidden;
  }
  .loader-bar > span{
    display:block;
    height:100%;
    width: 42%;
    background: linear-gradient(90deg, rgba(255,103,187,0.75), rgba(188,166,255,0.75), rgba(255,159,211,0.75));
    border-radius:999px;
    animation: load 1.1s ease-in-out infinite;
  }
  @keyframes load{
    0%{ transform: translateX(-120%); }
    100%{ transform: translateX(260%); }
  }

  /* Header */
  header{
    position:fixed;
    top:0; left:0; right:0;
    z-index:50;
    padding: 14px 16px;
  }
  .head-wrap{
    width:min(var(--max), 96vw);
    margin:0 auto;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:14px;
  }

  .brand{
    display:flex;
    align-items:center;
    gap:12px;
    min-width: 220px;
  }
  .logo{
    width:44px; height:44px;
    border-radius:14px;
    object-fit:contain;
    background: rgba(255,255,255,0.08);
    border:1px solid rgba(255,255,255,0.12);
    backdrop-filter: blur(var(--blur));
    box-shadow: 0 12px 30px rgba(0,0,0,0.22);
  }
  .brand-title{
    display:flex;
    flex-direction:column;
    line-height:1.1;
  }
  .brand-title strong{
    font-size: 14px;
    letter-spacing: .08em;
    text-transform: uppercase;
  }
  .brand-title span{
    font-size: 12px;
    color: var(--sub);
    font-family: var(--mono);
  }

  .head-mid{
    display:flex;
    align-items:center;
    gap:10px;
    justify-content:center;
    flex:1;
  }
  .official{
    writing-mode: vertical-rl;
    text-orientation: mixed;
    font-size: 10px;
    font-weight: 950;
    letter-spacing: .22em;
    opacity:.9;
    padding: 10px 8px;
    border:1px solid rgba(255,255,255,0.16);
    border-radius: 999px;
    background: rgba(0,0,0,0.18);
    backdrop-filter: blur(var(--blur));
    user-select:none;
  }

  .hot{
    display:flex;
    align-items:center;
    gap:10px;
    padding: 10px 12px;
    border-radius: 999px;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(0,0,0,0.18);
    backdrop-filter: blur(var(--blur));
    box-shadow: 0 14px 34px rgba(0,0,0,0.22);
    min-width: min(540px, 56vw);
  }
  .hot b{
    font-size: 12px;
    letter-spacing: .18em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.92);
    white-space:nowrap;
  }
  .hot .ticker{
    font-size: 12px;
    color: var(--sub);
    overflow:hidden;
    white-space:nowrap;
    text-overflow: ellipsis;
  }

  .head-actions{
    display:flex;
    align-items:center;
    gap:10px;
    min-width: 220px;
    justify-content:flex-end;
  }

  .pill, .iconbtn, select.pill{
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(0,0,0,0.18);
    color: var(--text);
    border-radius: 999px;
    padding: 10px 12px;
    font-weight: 900;
    cursor:pointer;
    transition: transform .18s ease, opacity .18s ease;
    backdrop-filter: blur(var(--blur));
    appearance:none;
    -webkit-appearance:none;
    outline:none;
  }
  .pill:hover, .iconbtn:hover, select.pill:hover{ transform: translateY(-1px); opacity:.95; }
  .pill:active, .iconbtn:active{ transform: translateY(0); }

  .iconbtn{
    padding: 10px 12px;
    font-size: 13px;
    letter-spacing: .12em;
    text-transform: uppercase;
  }

  /* Menu overlay */
  .menu{
    position:fixed;
    inset:0;
    z-index:60;
    background: radial-gradient(900px 580px at 30% 20%, rgba(255,103,187,0.18), transparent 55%),
                radial-gradient(900px 620px at 85% 30%, rgba(188,166,255,0.16), transparent 55%),
                linear-gradient(180deg, rgba(3,4,10,0.92), rgba(3,4,10,0.84));
    backdrop-filter: blur(18px);
    opacity:0;
    visibility:hidden;
    transition: opacity .25s ease, visibility .25s ease;
  }
  .menu.open{ opacity:1; visibility:visible; }
  .menu-inner{
    width:min(var(--max), 92vw);
    margin: 90px auto 40px;
    display:grid;
    grid-template-columns: 1fr;
    gap: 18px;
  }
  .menu-top{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
  }
  .menu-title{
    font-size: 12px;
    letter-spacing: .26em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.86);
  }
  .menu-close{
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.92);
    border-radius:999px;
    padding: 10px 12px;
    font-weight: 950;
    cursor:pointer;
  }
  .menu-grid{
    display:grid;
    grid-template-columns: repeat(2, minmax(0,1fr));
    gap: 12px;
  }
  @media (min-width: 880px){
    .menu-grid{ grid-template-columns: repeat(3, minmax(0,1fr)); }
  }
  .menu-link{
    text-decoration:none;
    color: var(--text);
    border-radius: 18px;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.06);
    padding: 14px 14px;
    box-shadow: 0 16px 40px rgba(0,0,0,0.22);
    transition: transform .18s ease, border-color .18s ease, background .18s ease;
  }
  .menu-link:hover{
    transform: translateY(-2px);
    border-color: rgba(255,103,187,0.24);
    background: rgba(255,103,187,0.08);
  }
  .menu-link b{
    display:block;
    font-size: 12px;
    letter-spacing: .20em;
    text-transform: uppercase;
  }
  .menu-link span{
    display:block;
    margin-top:6px;
    font-size: 12px;
    color: rgba(255,255,255,0.70);
  }

  .menu-controls{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    align-items:center;
  }

  /* Layout */
  main{
    padding-top: 84px; /* fixed header space */
  }

  .section{
    width:min(var(--max), 92vw);
    margin: 0 auto;
    padding: 70px 0;
  }

  .stars{
    width:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    gap:12px;
    opacity:.85;
    margin: 14px 0 0;
    color: rgba(255,255,255,0.55);
    letter-spacing:.6em;
  }
  html[data-theme="light"] .stars{ color: rgba(47,36,43,0.36); }

  .card{
    border:1px solid rgba(255,255,255,0.14);
    background: var(--card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    backdrop-filter: blur(var(--blur));
    overflow:hidden;
  }

  /* Hero */
  .hero{
    min-height: calc(100vh - 84px);
    display:grid;
    place-items:center;
    padding: 40px 0 20px;
  }
  .hero-card{
    width:100%;
    position:relative;
    border-radius: 28px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.14);
    background:
      radial-gradient(900px 520px at 10% 10%, rgba(255,103,187,0.14), transparent 60%),
      radial-gradient(900px 520px at 90% 30%, rgba(188,166,255,0.14), transparent 60%),
      rgba(255,255,255,0.06);
    box-shadow: 0 30px 90px rgba(0,0,0,0.44);
  }
  .hero-card::before{
    content:"";
    position:absolute;
    inset:0;
    background-image: var(--kv-img);
    background-size: cover;
    background-position:center;
    opacity:.22;
    filter: saturate(1.05) contrast(1.02);
  }
  .hero-card::after{
    content:"";
    position:absolute;
    inset:0;
    background: linear-gradient(180deg, rgba(0,0,0,0.30), rgba(0,0,0,0.62));
  }
  .hero-inner{
    position:relative;
    z-index:1;
    padding: 34px 22px;
    display:grid;
    gap: 16px;
  }
  @media (min-width: 860px){
    .hero-inner{
      grid-template-columns: 1.2fr 0.8fr;
      align-items:center;
      padding: 42px 34px;
    }
  }

  .hero-title{
    font-size: clamp(30px, 4vw, 52px);
    margin:0;
    letter-spacing: -0.02em;
    line-height:1.05;
    background: linear-gradient(90deg, var(--a), var(--b), var(--c));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
  }
  .hero-sub{
    margin: 10px 0 0;
    color: rgba(255,255,255,0.76);
    font-weight: 800;
    line-height:1.7;
  }
  html[data-theme="light"] .hero-sub{ color: rgba(255,255,255,0.78); } /* hero is dark overlay anyway */

  .hero-meta{
    display:grid;
    gap:12px;
    align-content:start;
  }
  .meta-box{
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.06);
    border-radius: 18px;
    padding: 14px 14px;
  }
  .meta-box b{
    display:block;
    font-size: 12px;
    letter-spacing: .22em;
    text-transform: uppercase;
    opacity:.92;
  }
  .meta-box p{
    margin:8px 0 0;
    color: rgba(255,255,255,0.70);
    font-weight: 800;
    line-height:1.6;
  }

  .hero-buttons{
    margin-top: 12px;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  }
  .btn{
    text-decoration:none;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding: 12px 14px;
    border-radius: 999px;
    font-weight: 950;
    border:1px solid rgba(255,255,255,0.16);
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.92);
    transition: transform .18s ease, background .18s ease, border-color .18s ease;
  }
  .btn:hover{
    transform: translateY(-1px);
    background: rgba(255,103,187,0.10);
    border-color: rgba(255,103,187,0.24);
  }

  /* Section heading */
  .h{
    display:flex;
    align-items:baseline;
    justify-content:space-between;
    gap:12px;
    margin-bottom: 14px;
  }
  .h h2{
    margin:0;
    font-size: 18px;
    letter-spacing: .18em;
    text-transform: uppercase;
  }
  .h .jp{
    font-size: 12px;
    color: var(--sub);
    font-weight: 850;
  }

  /* News list */
  .news{
    padding: 16px;
  }
  .news ul{ list-style:none; margin:0; padding:0; display:grid; gap:10px; }
  .news li{
    border:1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    border-radius: 16px;
    padding: 12px 12px;
    display:flex;
    gap:12px;
    align-items:flex-start;
  }
  .tag{
    font-family: var(--mono);
    font-size: 11px;
    letter-spacing:.10em;
    padding: 6px 8px;
    border-radius: 999px;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(0,0,0,0.18);
    white-space:nowrap;
  }
  .news .title{
    font-weight: 950;
    letter-spacing: -0.01em;
  }
  .news .desc{
    margin-top:4px;
    color: rgba(255,255,255,0.70);
    font-weight: 750;
    line-height:1.55;
  }
  html[data-theme="light"] .news .desc{ color: rgba(47,36,43,0.68); }

  /* Two columns panels */
  .grid2{
    display:grid;
    grid-template-columns: 1fr;
    gap: 14px;
  }
  @media (min-width: 860px){
    .grid2{ grid-template-columns: 1fr 1fr; }
  }
  .panel{
    padding: 16px;
  }
  .panel p{
    margin: 8px 0 0;
    color: rgba(255,255,255,0.72);
    font-weight: 800;
    line-height:1.7;
  }
  html[data-theme="light"] .panel p{ color: rgba(47,36,43,0.68); }

  /* Rules list */
  .rules ul{ list-style:none; margin:0; padding:0; display:grid; gap:10px; }
  .rules li{
    border:1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    border-radius: 16px;
    padding: 12px 12px;
    font-weight: 850;
    line-height:1.55;
  }

  /* Schedule */
  .week-toggle{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    margin-top: 10px;
  }
  .week-btn{
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.06);
    color: var(--text);
    border-radius: 999px;
    padding: 10px 12px;
    font-weight: 950;
    cursor:pointer;
    transition: transform .18s ease, background .18s ease, border-color .18s ease;
  }
  .week-btn:hover{ transform: translateY(-1px); }
  .week-btn.active{
    background: rgba(255,103,187,0.10);
    border-color: rgba(255,103,187,0.24);
  }
  .schedule-grid{ margin-top: 12px; display:grid; gap:10px; }
  .day-row{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:10px;
    border:1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    border-radius: 16px;
    padding: 12px 12px;
    position:relative;
  }
  .day-name{ font-weight: 1000; letter-spacing:-0.01em; }
  .badges{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
  .badge{
    padding: 6px 10px;
    border-radius: 999px;
    font-weight: 950;
    font-size: 12px;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(0,0,0,0.18);
    white-space:nowrap;
  }
  .badge.live{ border-color: rgba(52,211,153,0.40); background: rgba(52,211,153,0.12); }
  .badge.off{ border-color: rgba(255,103,187,0.26); background: rgba(255,103,187,0.08); }
  .badge.now{
    border-color: rgba(255,255,255,0.22);
    background: linear-gradient(90deg, rgba(255,103,187,0.18), rgba(188,166,255,0.14), rgba(255,159,211,0.14));
    animation: pulse 1.2s ease-in-out infinite;
  }
  .day-row.today{
    border-color: rgba(188,166,255,0.28);
    background: linear-gradient(90deg, rgba(188,166,255,0.12), rgba(255,103,187,0.08), rgba(255,159,211,0.06));
  }
  .day-row.today::after{
    content:"TODAY";
    position:absolute;
    top:-10px; right:12px;
    font-size: 10px;
    font-weight: 1000;
    letter-spacing: .12em;
    padding: 4px 8px;
    border-radius: 999px;
    border:1px solid rgba(188,166,255,0.24);
    background: rgba(188,166,255,0.12);
  }
  @keyframes pulse{
    0%{ transform: translateY(0); filter: brightness(1); }
    50%{ transform: translateY(-1px); filter: brightness(1.08); }
    100%{ transform: translateY(0); filter: brightness(1); }
  }

  /* Fortune */
  .fortune-top{
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:12px;
    flex-wrap:wrap;
  }
  .fortune-date{ font-weight: 1000; font-family: var(--mono); }
  .fortune-result{
    margin-top: 12px;
    border:1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    border-radius: 16px;
    padding: 12px 12px;
    min-height: 56px;
    font-weight: 850;
    line-height:1.6;
    white-space:pre-line;
  }
  .luck-wrap{ margin-top:12px; }
  .luck-label{ color: var(--sub); font-weight: 900; font-size: 12px; letter-spacing:.08em; }
  .luck-bar{
    margin-top: 8px;
    height: 12px;
    border-radius: 999px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.12);
    background: rgba(0,0,0,0.18);
  }
  .luck-fill{
    height:100%;
    width:0%;
    border-radius:999px;
    background: linear-gradient(90deg, rgba(255,103,187,0.62), rgba(188,166,255,0.62), rgba(255,159,211,0.62));
    transition: width .55s ease;
  }

  /* Lore + avatars */
  .rp-text{
    white-space:pre-line;
    font-weight: 820;
    line-height:1.75;
  }
  .avatars{
    display:grid;
    grid-template-columns: 1fr;
    gap:12px;
  }
  @media (min-width: 620px){
    .avatars{ grid-template-columns: 1fr 1fr; }
  }
  .avatar{
    border:1px solid rgba(255,255,255,0.12);
    background: rgba(255,255,255,0.06);
    border-radius: 18px;
    padding: 12px;
  }
  .avatar .label{
    display:flex;
    justify-content:space-between;
    align-items:center;
    color: var(--sub);
    font-weight: 950;
    font-size: 12px;
    margin-bottom: 10px;
  }
  .avatar img{
    width:100%;
    height: 240px;
    object-fit:contain;
    border-radius: 14px;
    background: rgba(0,0,0,0.18);
    border:1px solid rgba(255,255,255,0.10);
  }

  /* Social */
  .social{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
    padding: 16px;
  }
  .social a{
    width:46px; height:46px;
    display:grid;
    place-items:center;
    border-radius:999px;
    text-decoration:none;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(255,255,255,0.06);
    color: rgba(255,255,255,0.92);
    font-size: 20px;
    transition: transform .18s ease, background .18s ease, border-color .18s ease;
  }
  .social a:hover{
    transform: translateY(-1px);
    background: rgba(255,103,187,0.10);
    border-color: rgba(255,103,187,0.24);
  }
  .social a.x{ font-weight: 1000; font-size: 18px; }

  /* Scroll indicator */
  .scrollhint{
    position:fixed;
    left: 50%;
    bottom: 18px;
    transform: translateX(-50%);
    z-index:40;
    display:flex;
    align-items:center;
    gap:10px;
    padding: 10px 12px;
    border-radius: 999px;
    border:1px solid rgba(255,255,255,0.14);
    background: rgba(0,0,0,0.18);
    backdrop-filter: blur(var(--blur));
    font-family: var(--mono);
    font-size: 12px;
    color: rgba(255,255,255,0.82);
    opacity:.95;
    user-select:none;
  }
  .dot{
    width:6px; height:6px;
    border-radius:999px;
    background: rgba(255,255,255,0.78);
    animation: dot 1.2s ease-in-out infinite;
  }
  @keyframes dot{
    0%{ transform: translateY(0); opacity:.55; }
    50%{ transform: translateY(-2px); opacity:1; }
    100%{ transform: translateY(0); opacity:.55; }
  }

  /* Footer */
  footer{
    padding: 40px 0 70px;
    text-align:center;
    color: rgba(255,255,255,0.58);
    font-weight: 800;
    font-size: 12px;
  }

  @media (prefers-reduced-motion: reduce){
    *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
  }
</style>
</head>

<body>
<div class="noise"></div>

<!-- Loader -->
<div id="loader" aria-hidden="true">
  <div class="loader-inner">
    <div>LOADING</div>
    <div class="loader-bar"><span></span></div>
  </div>
</div>

<!-- Sounds -->
<audio id="clickSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_eead05cf8d.mp3?filename=click-124467.mp3"></audio>
<audio id="bgm" loop></audio>

<header>
  <div class="head-wrap">
    <div class="brand">
      <img class="logo" src="Î°úÍ≥†.png" alt="Irev Logo">
      <div class="brand-title">
        <strong id="brandTop">IREV</strong>
        <span id="brandSub">OFFICIAL SITE</span>
      </div>
    </div>

    <div class="head-mid">
      <div class="official">OFFICIAL</div>
      <div class="hot" role="note" aria-label="Hot News">
        <b>HOT NEWS</b>
        <div class="ticker" id="hotTicker">IrevÎ°ú Î¶¨Î∏åÎûúÎî© ÏôÑÎ£å. ÎßÅÌÅ¨/Í∑úÏπô/Ïä§ÏºÄÏ§Ñ ÏóÖÎç∞Ïù¥Ìä∏.</div>
      </div>
    </div>

    <div class="head-actions">
      <select id="lang" class="pill" title="Language">
        <option value="ko">üá∞üá∑ KO</option>
        <option value="ja">üáØüáµ JA</option>
        <option value="en">üá∫üá∏ EN</option>
      </select>

      <select id="track" class="pill" title="Track"></select>
      <button id="bgmBtn" class="pill" type="button" title="BGM">üéµ BGM</button>
      <button id="themeBtn" class="pill" type="button" title="Theme">üåô</button>

      <button id="menuBtn" class="iconbtn" type="button">MENU</button>
    </div>
  </div>
</header>

<!-- Menu Overlay -->
<div id="menu" class="menu" aria-hidden="true">
  <div class="menu-inner">
    <div class="menu-top">
      <div class="menu-title">OFFICIAL MENU</div>
      <button id="menuClose" class="menu-close" type="button">CLOSE</button>
    </div>

    <div class="menu-grid">
      <a class="menu-link" href="#top"><b>TOP</b><span id="mTop">Î©îÏù∏</span></a>
      <a class="menu-link" href="#news"><b>NEWS</b><span id="mNews">ÏµúÏã† ÏÜåÏãù</span></a>
      <a class="menu-link" href="#schedule"><b>SCHEDULE</b><span id="mSchedule">Î∞©ÏÜ° ÏùºÏ†ï</span></a>
      <a class="menu-link" href="#rules"><b>RULE</b><span id="mRules">Ï±ÑÌåÖ Í∑úÏπô</span></a>
      <a class="menu-link" href="#fortune"><b>LUCK</b><span id="mLuck">Ïö¥ÏÑ∏</span></a>
      <a class="menu-link" href="#lore"><b>RP</b><span id="mRp">ÏÑ§Ï†ï</span></a>
      <a class="menu-link" href="#links"><b>LINKS</b><span id="mLinks">SNS</span></a>
    </div>

    <div class="menu-controls">
      <span style="font-family:var(--mono); color:rgba(255,255,255,0.7); font-size:12px;">
        *   *   *
      </span>
    </div>
  </div>
</div>

<div class="scrollhint" id="scrollHint">
  <span class="dot"></span>
  <span id="scrollText">SCROLL</span>
</div>

<main>
  <!-- HERO -->
  <section class="section hero" id="top">
    <div class="hero-card">
      <div class="hero-inner">
        <div>
          <h1 class="hero-title" id="heroTitle">Ïù¥ÎûòÎ∏å (Irev) OFFICIAL</h1>
          <p class="hero-sub" id="heroSub">
            Ïö∞Ï£ºÏùò Í∑†Ïó¥ÏóêÏÑú ÌÉúÏñ¥ÎÇú ÏÖÄÎ†àÎÖ∏Ïù¥Îìú Ï†§. Ïò§ÎäòÎèÑ ‚ÄúÏû¨ÎØ∏‚ÄùÎ°ú ÏÇ¥ÏïÑÎÇ®ÎäîÎã§.
          </p>

          <div class="hero-buttons">
            <a class="btn" id="btnYt" href="https://www.youtube.com/@Avenia-k6l2x" target="_blank" rel="noopener">‚ñ∂Ô∏è YouTube</a>
            <a class="btn" id="btnTw" href="https://www.twitch.tv/aven1231" target="_blank" rel="noopener">üü£ Twitch</a>
            <a class="btn" id="btnCh" href="https://chzzk.naver.com/911df19d52a45f1d08791b2d43517dee" target="_blank" rel="noopener">üü¢ Chzzk</a>
            <a class="btn" id="btnSo" href="https://www.sooplive.co.kr/station/slimeavenia" target="_blank" rel="noopener">üåø SOOP</a>
            <a class="btn" id="btnTc" href="https://ko.twitcasting.tv/g:114782621463128489516" target="_blank" rel="noopener">üì° TwitCasting</a>
          </div>

          <div class="stars">*   *   *</div>
        </div>

        <div class="hero-meta">
          <div class="meta-box">
            <b id="meta1Title">STREAM TIME</b>
            <p id="meta1Body">üü¢ ÏπòÏßÄÏßÅ 16:00‚Äì18:00 (KST)<br>üü£ Ìä∏ÏúÑÏπò 23:00‚Äì02:00 (KST)</p>
          </div>
          <div class="meta-box">
            <b id="meta2Title">CONCEPT</b>
            <p id="meta2Body">Selenoid Gel ‚Ä¢ Cosmic Rift ‚Ä¢ Nekomata Soul</p>
          </div>
          <div class="meta-box">
            <b id="meta3Title">NOTICE</b>
            <p id="meta3Body">2Ï£º Î°úÌÖåÏù¥ÏÖò(A/B) Ïä§ÏºÄÏ§Ñ. Î©îÎâ¥ÏóêÏÑú Î∞îÎ°ú Ïù¥Îèô Í∞ÄÎä•.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- NEWS -->
  <section class="section" id="news">
    <div class="h">
      <h2>NEWS</h2>
      <div class="jp" id="newsSub">ÊúÄÊñ∞ÊÉÖÂ†±</div>
    </div>

    <div class="card news">
      <ul id="newsList"></ul>
    </div>
  </section>

  <!-- SCHEDULE -->
  <section class="section" id="schedule">
    <div class="h">
      <h2>SCHEDULE</h2>
      <div class="jp" id="scheduleSub">ÈÖç‰ø°„Çπ„Ç±„Ç∏„É•„Éº„É´</div>
    </div>

    <div class="grid2">
      <div class="card panel">
        <b style="font-size:12px; letter-spacing:.22em; text-transform:uppercase;" id="schInfoTitle">INFO</b>
        <p id="schInfoBody">üü¢ ÏπòÏßÄÏßÅ: Ïò§ÌõÑ 4:00 ~ Ïò§ÌõÑ 6:00 (KST)<br>üü£ Ìä∏ÏúÑÏπò: Ïò§ÌõÑ 11:00 ~ Ïò§Ï†Ñ 2:00 (KST)</p>
        <div class="week-toggle">
          <button id="weekA" class="week-btn" type="button"></button>
          <button id="weekB" class="week-btn" type="button"></button>
        </div>
        <p id="schFooter" style="margin-top:12px; color:var(--sub); font-weight:850;"></p>
      </div>

      <div class="card panel">
        <b style="font-size:12px; letter-spacing:.22em; text-transform:uppercase;" id="schWeekTitle">WEEK</b>
        <div class="schedule-grid" id="scheduleGrid"></div>
      </div>
    </div>
  </section>

  <!-- RULES -->
  <section class="section" id="rules">
    <div class="h">
      <h2>RULE</h2>
      <div class="jp" id="rulesSub">„É´„Éº„É´</div>
    </div>

    <div class="grid2">
      <div class="card panel">
        <b style="font-size:12px; letter-spacing:.22em; text-transform:uppercase;" id="rulesTitle">CHAT RULES</b>
        <p id="rulesDesc"></p>
      </div>
      <div class="card panel rules">
        <ul id="rulesList"></ul>
        <p id="rulesFooter" style="margin-top:12px; color:var(--sub); font-weight:850;"></p>
      </div>
    </div>
  </section>

  <!-- FORTUNE -->
  <section class="section" id="fortune">
    <div class="h">
      <h2>LUCK</h2>
      <div class="jp" id="fortuneSub">‰ªäÊó•„ÅÆÈÅãÂã¢</div>
    </div>

    <div class="card panel">
      <div class="fortune-top">
        <div>
          <b style="font-size:12px; letter-spacing:.22em; text-transform:uppercase;" id="fortuneTitle">DAILY FORTUNE</b>
          <p id="fortuneDesc"></p>
        </div>
        <div style="text-align:right;">
          <div class="fortune-date" id="fortuneDate"></div>
          <button id="fortuneBtn" class="pill" type="button" style="margin-top:10px;"></button>
        </div>
      </div>

      <div class="fortune-result" id="fortuneResult" aria-live="polite"></div>

      <div class="luck-wrap">
        <div class="luck-label" id="luckLabel"></div>
        <div class="luck-bar"><div class="luck-fill" id="luckFill"></div></div>
      </div>

      <p id="fortuneFooter" style="margin-top:12px; color:var(--sub); font-weight:850;"></p>
    </div>
  </section>

  <!-- LORE / RP -->
  <section class="section" id="lore">
    <div class="h">
      <h2>RP</h2>
      <div class="jp" id="rpSub">Ë®≠ÂÆö</div>
    </div>

    <div class="grid2">
      <div class="card panel">
        <b style="font-size:12px; letter-spacing:.22em; text-transform:uppercase;" id="rpTitle">PROFILE</b>
        <p class="rp-text" id="rpText"></p>
        <p class="rp-text" id="rpStream" style="margin-top:12px; color:rgba(255,255,255,0.72);"></p>
      </div>

      <div class="card panel">
        <b style="font-size:12px; letter-spacing:.22em; text-transform:uppercase;" id="formsTitle">FORMS</b>
        <div class="avatars" style="margin-top:12px;">
          <div class="avatar">
            <div class="label"><span id="slimeLabel"></span><span>üü£</span></div>
            <img src="slime.png" alt="Slime Form">
          </div>
          <div class="avatar">
            <div class="label"><span id="humanLabel"></span><span>üå∏</span></div>
            <img src="human.png" alt="Human Form">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- LINKS -->
  <section class="section" id="links">
    <div class="h">
      <h2>LINKS</h2>
      <div class="jp" id="linksSub">„É™„É≥„ÇØ</div>
    </div>

    <div class="card social">
      <a href="https://discord.gg/HMEFa3CPc8" target="_blank" rel="noopener" title="Discord">üí¨</a>
      <a href="https://www.youtube.com/@Even%EB%8B%A4%EC%8B%9C%EB%B3%B4%EA%B8%B0" target="_blank" rel="noopener" title="YouTube">‚ñ∂Ô∏è</a>
      <a href="https://x.com/aven1166793?s=21" target="_blank" rel="noopener" title="X" class="x">ùïè</a>
      <a href="https://toon.at/donate/aven" target="_blank" rel="noopener" title="Donate">üíù</a>
      <a href="https://fancim.me/celeb/profile.aspx?url=758954" target="_blank" rel="noopener" title="Ìå¨Ïã¨">üéÅ</a>
      <a href="https://comic.naver.com/community/u/Even77777?lastPage=Creators" target="_blank" rel="noopener" title="Naver Comic">üñãÔ∏è</a>
      <a href="https://cafe.naver.com/f-e/cafes/31529869/menus/0?t=1762537197544" target="_blank" rel="noopener" title="Cafe">‚òï</a>
    </div>

    <footer>¬© 2026 Irev. All Rights Reserved.</footer>
  </section>
</main>

<script>
/* =========================
   ‚úÖ DATA (Avenia -> Irev)
   ========================= */

const i18n = {
  ko: {
    brandTop: "IREV",
    brandSub: "OFFICIAL SITE",
    scroll: "SCROLL",
    heroTitle: "Ïù¥ÎûòÎ∏å (Irev) OFFICIAL",
    heroSub: "Ïö∞Ï£ºÏùò Í∑†Ïó¥ÏóêÏÑú ÌÉúÏñ¥ÎÇú ÏÖÄÎ†àÎÖ∏Ïù¥Îìú Ï†§. Ïò§ÎäòÎèÑ ‚ÄúÏû¨ÎØ∏‚ÄùÎ°ú ÏÇ¥ÏïÑÎÇ®ÎäîÎã§.",
    meta1Title: "STREAM TIME",
    meta1Body: "üü¢ ÏπòÏßÄÏßÅ 16:00‚Äì18:00 (KST)\nüü£ Ìä∏ÏúÑÏπò 23:00‚Äì02:00 (KST)",
    meta2Title: "CONCEPT",
    meta2Body: "Selenoid Gel ‚Ä¢ Cosmic Rift ‚Ä¢ Nekomata Soul",
    meta3Title: "NOTICE",
    meta3Body: "2Ï£º Î°úÌÖåÏù¥ÏÖò(A/B) Ïä§ÏºÄÏ§Ñ. Î©îÎâ¥ÏóêÏÑú Î∞îÎ°ú Ïù¥Îèô Í∞ÄÎä•.",
    menu: {
      top:"Î©îÏù∏", news:"ÏµúÏã† ÏÜåÏãù", schedule:"Î∞©ÏÜ° ÏùºÏ†ï", rules:"Ï±ÑÌåÖ Í∑úÏπô", luck:"Ïö¥ÏÑ∏", rp:"ÏÑ§Ï†ï", links:"SNS"
    },
    subs: { news:"ÏµúÏã†Ï†ïÎ≥¥", schedule:"Î∞©ÏÜ°ÏùºÏ†ï", rules:"Í∑úÏπô", fortune:"Ïò§ÎäòÏùò Ïö¥ÏÑ∏", rp:"ÏÑ§Ï†ï", links:"ÎßÅÌÅ¨" },

    hotTicker: "IrevÎ°ú Î¶¨Î∏åÎûúÎî© ÏôÑÎ£å. ÎßÅÌÅ¨/Í∑úÏπô/Ïä§ÏºÄÏ§Ñ ÏóÖÎç∞Ïù¥Ìä∏.",

    news: [
      { tag:"UPDATE", title:"Ïù¥ÎûòÎ∏å(Irev)Î°ú ÌëúÍ∏∞ ÌÜµÏùº", desc:"Aven/Avenia ÌëúÍ∏∞Î•º Ï†ÑÎ∂Ä Irev/Ïù¥ÎûòÎ∏åÎ°ú Î≥ÄÍ≤ΩÌñàÏäµÎãàÎã§." },
      { tag:"SCHEDULE", title:"2Ï£º Î°úÌÖåÏù¥ÏÖò Ïä§ÏºÄÏ§Ñ", desc:"A/B Ï£ºÏ∞® ÌÜ†Í∏ÄÎ°ú Ïù¥Î≤à Ï£º Î∞©ÏÜ°/Ìú¥Î∞©ÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏñ¥Ïöî." },
      { tag:"FUN", title:"Ïò§ÎäòÏùò Ïö¥ÏÑ∏ Ïò§Ìîà", desc:"Í∏∞Î∂Ñ Ï†ÑÌôòÏö© ‚ÄòÍ∑†Ïó¥ Ïö¥ÏÑ∏‚Äô. ÎßàÏùåÏóê Ïïà Îì§Î©¥ Îã§Ïãú ÎΩëÍ∏∞ Í∞ÄÎä•." }
    ],

    schedule: {
      infoTitle:"INFO",
      infoBody:"üü¢ ÏπòÏßÄÏßÅ: Ïò§ÌõÑ 4:00 ~ Ïò§ÌõÑ 6:00 (KST)\nüü£ Ìä∏ÏúÑÏπò: Ïò§ÌõÑ 11:00 ~ Ïò§Ï†Ñ 2:00 (KST)",
      footer:"‚Äª 2Ï£º Î°úÌÖåÏù¥ÏÖò. A/BÎ•º ÏÑ†ÌÉùÌï¥ÏÑú ÌôïÏù∏ÌïòÏÑ∏Ïöî.",
      labels:{ live:"Î∞©ÏÜ°", off:"Ìú¥Î∞©" },
      now:"LIVE NOW",
      platform:{ chzzk:"ÏπòÏßÄÏßÅ", twitch:"Ìä∏ÏúÑÏπò" },
      weekA:{ label:"üÖ∞Ô∏è 1Ï£ºÏ∞®", note:"A Rotation",
        days:[
          { day:"Ïõî", state:"off" },
          { day:"Ìôî", state:"live" },
          { day:"Ïàò", state:"off" },
          { day:"Î™©", state:"live" },
          { day:"Í∏à", state:"off" },
          { day:"ÌÜ†", state:"live" },
          { day:"Ïùº", state:"off" }
        ]
      },
      weekB:{ label:"üÖ±Ô∏è 2Ï£ºÏ∞®", note:"B Rotation",
        days:[
          { day:"Ïõî", state:"live" },
          { day:"Ìôî", state:"off" },
          { day:"Ïàò", state:"live" },
          { day:"Î™©", state:"off" },
          { day:"Í∏à", state:"live" },
          { day:"ÌÜ†", state:"off" },
          { day:"Ïùº", state:"live" }
        ]
      }
    },

    rules: {
      title:"CHAT RULES",
      desc:"Í∏∞Î≥∏Ï†ÅÏù∏ Ïú§Î¶¨Îäî ÏßÄÏºúÏïº Î™®ÎëêÍ∞Ä Ìé∏Ìïú Í≥µÍ∞ÑÏù¥ Îê©ÎãàÎã§.",
      footer:"‚Äª Ïñ¥Î†§Ïö¥ Í∑úÏπô ÏïÑÎãàÎãàÍπê~ ÏßÄÏºúÏ£ºÏÑ∏Ïöî~.",
      list:[
        "ÏòàÏùòÏôÄ Ï°¥Ï§ëÏùÑ ÏßÄÏºúÏ£ºÏÑ∏Ïöî.",
        "Î¨¥Î°Ä, ÎπÑÌïò, ÏöïÏÑ§ÏùÄ ÌóàÏö©ÎêòÏßÄ ÏïäÏäµÎãàÎã§.",
        "Ï†ïÏπò / Ï¢ÖÍµê / ÎØºÍ∞êÌïú Ï£ºÏ†úÎäî Í∏àÏßÄÏûÖÎãàÎã§.",
        "Ïä§Ìè¨ÏùºÎü¨ Î∞è TMI ÏûêÏ†ú Î∞îÎûçÎãàÎã§.",
        "ÌÉÄÏù∏Ïùò ÌèâÌåêÏùÑ Ìï¥ÏπòÎäî Ï±ÑÌåÖÏùÄ Í∏àÏßÄÏûÖÎãàÎã§."
      ]
    },

    fortune: {
      title:"DAILY FORTUNE",
      desc:"Ïû¨ÎØ∏Î°úÎßå Î≥¥Îäî Í∑†Ïó¥ Ïö¥ÏÑ∏. ÎßàÏùåÏóê Ïïà Îì§Î©¥ Îã§Ïãú ÎΩëÏïÑÎèÑ Îê®.",
      footer:"‚Äª ÏßÑÏßÄÌïòÍ≤å ÎØøÏßÄ Îßê Í≤É. Ïû¨ÎØ∏Îäî OK.",
      btn:"üîÆ Ïö¥ÏÑ∏ ÎΩëÍ∏∞",
      luckLabel:"Ïò§ÎäòÏùò Ïö¥(%)"
    },

    rp: {
      title:"PROFILE",
      forms:"FORMS",
      slime:"Ïä¨ÎùºÏûÑ Ìèº",
      human:"Ïù∏Í∞Ñ Ìèº",
      text:
`Ïù¥Î¶Ñ : Ïù¥ÎûòÎ∏å (Irev)
Ï¢ÖÏ°± : ÏÖÄÎ†àÎÖ∏Ïù¥Îìú Ï†§ (Selenoid Gel)
ÌÉÑÏÉù : Î∂ïÍ¥¥Îêú Ïö∞Ï£ºÏùò Í∑†Ïó¥ÏóêÏÑú ÌÉúÏñ¥ÎÇ®
Ïô∏Ìòï : Ïä¨ÎùºÏûÑ (Ï†§Î¶¨)

ÏÑ§Î™Ö : Í≥†ÏñëÏù¥Í∞Ä ÎÑ§ÏΩîÎßàÌÉÄÎ°ú Î≥ÄÏù¥Ìïú Ïù¥ÌõÑ,
Í∑∏ ÏòÅÌòºÏù¥ Ïö∞Ï£ºÏùò Í∑†Ïó¥Ï≤¥ÏôÄ ÏúµÌï©Îêú Ï°¥Ïû¨.
Ïú°Ï≤¥Îäî ÏÜåÎ©∏ÌñàÏúºÎÇò, ÏùòÏãùÏùÄ Í∑†Ïó¥ ÏÜçÏóêÏÑú ÏÉàÎ°úÏö¥ ÌòïÌÉúÎ°ú Ïû¨Íµ¨ÏÑ±ÎêòÏóàÎã§.`,
      stream:
`Î∞©ÏÜ° Ï§ë ÏÑ§Ï†ï:
Î∞©ÏÜ° Ï§ëÏóêÎäî Ïù∏Í∞Ñ ÌòïÌÉúÎ°ú ÌôúÎèôÌïòÏßÄÎßå,
ÏÑ∏Í≥ÑÍ¥ÄÏÉÅ Î≥∏ÏßàÏùÄ Ìï≠ÏÉÅ Ïä¨ÎùºÏûÑ ÏÉÅÌÉúÎ°ú Ïú†ÏßÄÎêúÎã§.`
    }
  },

  en: {
    brandTop: "IREV",
    brandSub: "OFFICIAL SITE",
    scroll: "SCROLL",
    heroTitle: "Irev OFFICIAL",
    heroSub: "A Selenoid Gel born from a cosmic rift. Surviving on ‚Äúfun‚Äù today too.",
    meta1Title: "STREAM TIME",
    meta1Body: "üü¢ CHZZK 16:00‚Äì18:00 (KST)\nüü£ Twitch 23:00‚Äì02:00 (KST)",
    meta2Title: "CONCEPT",
    meta2Body: "Selenoid Gel ‚Ä¢ Cosmic Rift ‚Ä¢ Nekomata Soul",
    meta3Title: "NOTICE",
    meta3Body: "2-week rotation schedule (A/B). Jump via MENU.",
    menu: { top:"Top", news:"News", schedule:"Schedule", rules:"Rules", luck:"Luck", rp:"RP", links:"Links" },
    subs: { news:"Latest", schedule:"Streaming", rules:"Rules", fortune:"Daily Fortune", rp:"Lore", links:"Links" },

    hotTicker: "Rebrand done: Irev. Links/Rules/Schedule updated.",

    news: [
      { tag:"UPDATE", title:"Unified name as Irev", desc:"All Aven/Avenia labels changed to Irev." },
      { tag:"SCHEDULE", title:"2-week rotation", desc:"Use A/B toggle to check LIVE/OFF days." },
      { tag:"FUN", title:"Daily fortune", desc:"Rift fortune for fun. Roll again anytime." }
    ],

    schedule: {
      infoTitle:"INFO",
      infoBody:"üü¢ CHZZK: 4:00 PM ~ 6:00 PM (KST)\nüü£ Twitch: 11:00 PM ~ 2:00 AM (KST)",
      footer:"‚Äª 2-week rotation. Use A/B toggle.",
      labels:{ live:"LIVE", off:"OFF" },
      now:"LIVE NOW",
      platform:{ chzzk:"CHZZK", twitch:"Twitch" },
      weekA:{ label:"üÖ∞Ô∏è Week A", note:"A Rotation",
        days:[{day:"Mon",state:"off"},{day:"Tue",state:"live"},{day:"Wed",state:"off"},{day:"Thu",state:"live"},{day:"Fri",state:"off"},{day:"Sat",state:"live"},{day:"Sun",state:"off"}]
      },
      weekB:{ label:"üÖ±Ô∏è Week B", note:"B Rotation",
        days:[{day:"Mon",state:"live"},{day:"Tue",state:"off"},{day:"Wed",state:"live"},{day:"Thu",state:"off"},{day:"Fri",state:"live"},{day:"Sat",state:"off"},{day:"Sun",state:"live"}]
      }
    },

    rules: {
      title:"CHAT RULES",
      desc:"Basic ethics keep the room comfortable for everyone.",
      footer:"‚Äª Simple rules. Please follow them.",
      list:[
        "Be polite and respectful.",
        "No insults, slurs, or profanity.",
        "No politics/religion/sensitive topics.",
        "Avoid spoilers and excessive TMI.",
        "Do not harm others‚Äô reputation."
      ]
    },

    fortune: {
      title:"DAILY FORTUNE",
      desc:"Just for fun. Don‚Äôt like it? Roll again.",
      footer:"‚Äª For fun only.",
      btn:"üîÆ Draw Fortune",
      luckLabel:"Luck (%)"
    },

    rp: {
      title:"PROFILE",
      forms:"FORMS",
      slime:"Slime Form",
      human:"Human Form",
      text:
`Name: Irev
Species: Selenoid Gel
Birth: Born from a collapsing cosmic rift
Form: Slime (jelly)

Description: After a cat mutated into a Nekomata,
its soul fused with a rift-entity.
The body was lost, but consciousness was rebuilt inside the rift.`,
      stream:
`Stream Setting:
During streams, Irev acts in a human form,
but the true essence remains slime in the lore.`
    }
  },

  ja: {
    brandTop: "IREV",
    brandSub: "OFFICIAL SITE",
    scroll: "SCROLL",
    heroTitle: "„Ç§„É¨„É¥ÔºàIrevÔºâOFFICIAL",
    heroSub: "ÂÆáÂÆô„ÅÆ‰∫ÄË£Ç„Åã„ÇâÁîü„Åæ„Çå„Åü„Çª„É¨„Éé„Ç§„Éâ„Éª„Ç∏„Çß„É´„ÄÇ‰ªäÊó•„ÇÇ„ÄåÊ•Ω„Åó„Åï„Äç„ÅßÁîü„ÅçÂª∂„Å≥„Çã„ÄÇ",
    meta1Title: "STREAM TIME",
    meta1Body: "üü¢ CHZZK 16:00‚Äì18:00ÔºàÈüìÂõΩÊôÇÈñìÔºâ\nüü£ Twitch 23:00‚Äì02:00ÔºàÈüìÂõΩÊôÇÈñìÔºâ",
    meta2Title: "CONCEPT",
    meta2Body: "Selenoid Gel ‚Ä¢ Cosmic Rift ‚Ä¢ Nekomata Soul",
    meta3Title: "NOTICE",
    meta3Body: "2ÈÄ±Èñì„É≠„Éº„ÉÜ(A/B)„ÄÇMENU„Åã„ÇâÂêÑ„Çª„ÇØ„Ç∑„Éß„É≥„Å∏„ÄÇ",
    menu: { top:"„Éà„ÉÉ„Éó", news:"ÊúÄÊñ∞ÊÉÖÂ†±", schedule:"ÈÖç‰ø°‰∫àÂÆö", rules:"„É´„Éº„É´", luck:"ÈÅãÂã¢", rp:"Ë®≠ÂÆö", links:"„É™„É≥„ÇØ" },
    subs: { news:"ÊúÄÊñ∞ÊÉÖÂ†±", schedule:"ÈÖç‰ø°„Çπ„Ç±„Ç∏„É•„Éº„É´", rules:"„É´„Éº„É´", fortune:"‰ªäÊó•„ÅÆÈÅãÂã¢", rp:"Ë®≠ÂÆö", links:"„É™„É≥„ÇØ" },

    hotTicker: "Ë°®Ë®ò„ÇíIrev„Å´Áµ±‰∏Ä„ÄÇ„É™„É≥„ÇØ/„É´„Éº„É´/„Çπ„Ç±„Ç∏„É•„Éº„É´Êõ¥Êñ∞„ÄÇ",

    news: [
      { tag:"UPDATE", title:"Ë°®Ë®ò„ÇíIrev„Å´Áµ±‰∏Ä", desc:"Aven/AveniaË°®Ë®ò„ÇíIrev/„Ç§„É¨„É¥„Å´Â§âÊõ¥„Åó„Åæ„Åó„Åü„ÄÇ" },
      { tag:"SCHEDULE", title:"2ÈÄ±Èñì„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥", desc:"A/BÂàá„ÇäÊõø„Åà„ÅßÈÖç‰ø°Êó•„Éª‰ºë„Åø„ÅåÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ" },
      { tag:"FUN", title:"‰ªäÊó•„ÅÆÈÅãÂã¢", desc:"Ê∞óÂàÜËª¢Êèõ„ÅÆ‚Äú‰∫ÄË£ÇÂç†„ÅÑ‚Äù„ÄÇÊ∞ó„Å´ÂÖ•„Çâ„Å™„Åë„Çå„Å∞Âºï„ÅçÁõ¥„ÅóOK„ÄÇ" }
    ],

    schedule: {
      infoTitle:"INFO",
      infoBody:"üü¢ CHZZKÔºö16:00ÔΩû18:00ÔºàÈüìÂõΩÊôÇÈñìÔºâ\nüü£ TwitchÔºö23:00ÔΩû02:00ÔºàÈüìÂõΩÊôÇÈñìÔºâ",
      footer:"‚Äª 2ÈÄ±Èñì„É≠„Éº„ÉÜ„Éº„Ç∑„Éß„É≥„ÄÇA/B„ÅßÂàá„ÇäÊõø„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
      labels:{ live:"ÈÖç‰ø°", off:"‰ºë„Åø" },
      now:"ÈÖç‰ø°‰∏≠",
      platform:{ chzzk:"CHZZK", twitch:"Twitch" },
      weekA:{ label:"üÖ∞Ô∏è 1ÈÄ±ÁõÆ", note:"A Rotation",
        days:[{day:"Êúà",state:"off"},{day:"ÁÅ´",state:"live"},{day:"Ê∞¥",state:"off"},{day:"Êú®",state:"live"},{day:"Èáë",state:"off"},{day:"Âúü",state:"live"},{day:"Êó•",state:"off"}]
      },
      weekB:{ label:"üÖ±Ô∏è 2ÈÄ±ÁõÆ", note:"B Rotation",
        days:[{day:"Êúà",state:"live"},{day:"ÁÅ´",state:"off"},{day:"Ê∞¥",state:"live"},{day:"Êú®",state:"off"},{day:"Èáë",state:"live"},{day:"Âúü",state:"off"},{day:"Êó•",state:"live"}]
      }
    },

    rules: {
      title:"CHAT RULES",
      desc:"Âü∫Êú¨ÁöÑ„Å™ÂÄ´ÁêÜ„ÇíÂÆà„Å£„Å¶„ÄÅÁöÜ„ÅåÂø´ÈÅ©„Å™Á©∫Èñì„Å´„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ",
      footer:"‚Äª Èõ£„Åó„ÅÑ„É´„Éº„É´„Åß„ÅØ„Å™„ÅÑ„ÅÆ„ÅßÂÆà„Å£„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
      list:[
        "Á§ºÂÑÄ„Å®Êï¨ÊÑè„ÇíÂ§ßÂàá„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
        "ÁÑ°Á§º„Éª‰æÆËæ±„ÉªÊö¥Ë®Ä„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇ",
        "ÊîøÊ≤ª„ÉªÂÆóÊïô„Éª„Çª„É≥„Ç∑„ÉÜ„Ç£„Éñ„Å™Ë©±È°å„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇ",
        "„Éç„Çø„Éê„É¨„ÇÑTMI„ÅØÊéß„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
        "‰ªñ‰∫∫„ÅÆË©ïÂà§„ÇíÂÇ∑„Å§„Åë„ÇãÁô∫Ë®Ä„ÅØÁ¶ÅÊ≠¢„Åß„Åô„ÄÇ"
      ]
    },

    fortune: {
      title:"DAILY FORTUNE",
      desc:"ÈÅä„Å≥Áî®„ÅÆ‚Äú‰∫ÄË£ÇÂç†„ÅÑ‚Äù„ÄÇÊ∞ó„Å´ÂÖ•„Çâ„Å™„Åë„Çå„Å∞Âºï„ÅçÁõ¥„Åó„Å¶OK„ÄÇ",
      footer:"‚Äª „ÅÇ„Åè„Åæ„ÅßÈÅä„Å≥„Åß„Åô„ÄÇ",
      btn:"üîÆ ÈÅãÂã¢„ÇíÂºï„Åè",
      luckLabel:"‰ªäÊó•„ÅÆÈÅã(%)"
    },

    rp: {
      title:"PROFILE",
      forms:"FORMS",
      slime:"„Çπ„É©„Ç§„É†ÂΩ¢ÊÖã",
      human:"‰∫∫ÈñìÂΩ¢ÊÖã",
      text:
`ÂêçÂâçÔºö„Ç§„É¨„É¥ÔºàIrevÔºâ
Á®ÆÊóèÔºö„Çª„É¨„Éé„Ç§„Éâ„Éª„Ç∏„Çß„É´ÔºàSelenoid GelÔºâ
Ë™ïÁîüÔºöÂ¥©Â£ä„Åó„ÅüÂÆáÂÆô„ÅÆ‰∫ÄË£Ç„Åã„ÇâË™ïÁîü
Â§ñË¶ãÔºö„Çπ„É©„Ç§„É†Ôºà„Çº„É™„ÉºÁä∂Ôºâ

Ë™¨ÊòéÔºöÁå´„Åå„Éç„Ç≥„Éû„Çø„Å∏Â§âÁï∞„Åó„ÅüÂæå„ÄÅ
„Åù„ÅÆÈ≠Ç„ÅåÂÆáÂÆô„ÅÆ‰∫ÄË£Ç‰Ωì„Å®ËûçÂêà„Åó„ÅüÂ≠òÂú®„ÄÇ
ËÇâ‰Ωì„ÅØÂ§±„Çè„Çå„Åü„Åå„ÄÅÊÑèË≠ò„ÅØ‰∫ÄË£Ç„ÅÆ‰∏≠„ÅßÂÜçÊßãÁØâ„Åï„Çå„Åü„ÄÇ`,
      stream:
`ÈÖç‰ø°‰∏≠„ÅÆË®≠ÂÆöÔºö
ÈÖç‰ø°‰∏≠„ÅØ‰∫∫ÈñìÂΩ¢ÊÖã„ÅßÊ¥ªÂãï„Åô„Çã„Åå„ÄÅ
‰∏ñÁïåË¶≥‰∏ä„ÅÆÊú¨Ë≥™„ÅØÂ∏∏„Å´„Çπ„É©„Ç§„É†„ÅÆ„Åæ„Åæ„Åß„ÅÇ„Çã„ÄÇ`
    }
  }
};

const fortunes = {
  ko: [
    {t:"Í∑†Ïó¥Ïù¥ ÎØ∏ÏÜå ÏßìÎäî ÎÇ†", d:"ÏûëÏùÄ ÏÑ†ÌÉùÏù¥ ÌÅ∞ Í≤∞Í≥ºÎ°ú ÌäÑÎã§. Ïò§ÎäòÏùÄ ‚ÄòÎ∞îÎ°ú ÌïòÍ∏∞‚ÄôÍ∞Ä Ïù¥Í∏¥Îã§.", luck: 82, e:"üåå"},
    {t:"Ï†§Î¶¨ Î©òÌÉà Í∞ïÌôî", d:"Í∞êÏ†ï ÎÇ≠ÎπÑ Ï§ÑÏù¥Î©¥ Ï≤¥Î†• ÎÇ®ÎäîÎã§. ÎßêÏùÄ ÏßßÍ≤å, Í≤∞Ï†ïÏùÄ Îπ†Î•¥Í≤å.", luck: 68, e:"üü£"},
    {t:"ÎÑ§ÏΩîÎßàÌÉÄÏùò Ï¥â", d:"ÎààÏπòÍ∞Ä ÎØ∏ÏπúÎã§. Ïù¥ÏÉÅÌïú ÎÇåÏÉà ÎäêÎÅºÎ©¥ Í∑∏Ï™ΩÏù¥ Ï†ïÎãµ.", luck: 74, e:"üêæ"},
    {t:"Î∞òÏßù Ïö¥Îπ®", d:"Í∞ÄÏ±†/ÎΩëÍ∏∞/ÎûúÎç§ÏùÄ Ïò§Îäò Ïú†Î¶¨. Îã®, Í≥ºÎ™∞ÏûÖ Í∏àÏßÄ.", luck: 79, e:"‚ú®"},
    {t:"Ï°∞Ïö©Ìïú ÌöåÎ≥µ", d:"Î¨¥Î¶¨ÌïòÎ©¥ Íπ®ÏßÑÎã§. Ïª®ÎîîÏÖò Í¥ÄÎ¶¨Í∞Ä ÏµúÏö∞ÏÑ†.", luck: 61, e:"ü´ß"},
    {t:"ÎåÄÌôîÏö¥", d:"Ìïú ÎßàÎîîÍ∞Ä ÏÇ¨Îûå Î∂ôÏù∏Îã§. Í≥†Ï†ï Î©òÌä∏ ÌïòÎÇò Ï§ÄÎπÑÌï¥.", luck: 70, e:"üí¨"},
    {t:"ÏßëÏ§ë Î™®Îìú", d:"Ìïú Î≤à Î∂ôÏúºÎ©¥ Í∏∏Í≤å Í∞ÑÎã§. Ï†ïÎ¶¨/ÏûëÏóÖ/Í∞úÎ∞úÏóê Í∞ïÌï®.", luck: 76, e:"üß†"},
    {t:"Ïä§Ìè¨Ìä∏ÎùºÏù¥Ìä∏", d:"ÏÇ¨ÎûåÏù¥ Î™®Ïù∏Îã§. ÎåÄÏã† ÎßêÏã§ÏàòÎßå Ï°∞Ïã¨.", luck: 73, e:"üéôÔ∏è"}
  ],
  en: [
    {t:"The Rift Smiles", d:"Small choices snowball. ‚ÄòDo it now‚Äô wins today.", luck: 82, e:"üåå"},
    {t:"Gel Mind, Strong", d:"Save your energy. Short words, quick decisions.", luck: 68, e:"üü£"},
    {t:"Nekomata Instinct", d:"Your gut is sharp. If something feels off, it is.", luck: 74, e:"üêæ"},
    {t:"Spark Luck", d:"Random pulls favor you. Don‚Äôt overdo it.", luck: 79, e:"‚ú®"},
    {t:"Quiet Recovery", d:"Don‚Äôt push too hard. Protect your condition.", luck: 61, e:"ü´ß"},
    {t:"Talk Luck", d:"One line can hook people. Prepare a signature phrase.", luck: 70, e:"üí¨"},
    {t:"Focus Mode", d:"Deep work goes well. Organize, build, ship.", luck: 76, e:"üß†"},
    {t:"Spotlight", d:"Eyes on you today. Avoid careless slips.", luck: 73, e:"üéôÔ∏è"}
  ],
  ja: [
    {t:"‰∫ÄË£Ç„ÅåÂæÆÁ¨ë„ÇÄÊó•", d:"Â∞è„Åï„Å™ÈÅ∏Êäû„ÅåÂ§ß„Åç„ÅèË∑≥„Å≠„Çã„ÄÇ„Äå‰ªä„ÇÑ„Çã„Äç„ÅåÂãù„Å§„ÄÇ", luck: 82, e:"üåå"},
    {t:"„Ç∏„Çß„É´Á≤æÁ•ûÂº∑Âåñ", d:"ÊÑüÊÉÖ„ÅÆÁÑ°ÈßÑÈÅ£„ÅÑ„ÇíÊ∏õ„Çâ„Åô„Å®Ê•Ω„ÄÇÁü≠„ÅèË©±„Åó„Å¶„ÄÅÊó©„ÅèÊ±∫„ÇÅ„Çã„ÄÇ", luck: 68, e:"üü£"},
    {t:"„Éç„Ç≥„Éû„Çø„ÅÆÂãò", d:"Áõ¥ÊÑü„ÅåÂÜ¥„Åà„Çã„ÄÇÈÅïÂíåÊÑü„Åå„ÅÇ„Å£„Åü„Çâ„Åù„Å£„Å°„ÅåÊ≠£Ëß£„ÄÇ", luck: 74, e:"üêæ"},
    {t:"„Ç≠„É©ÈÅã", d:"„Ç¨„ÉÅ„É£ÈÅã„Çà„Åó„ÄÇ„ÇÑ„Çä„Åô„ÅéÊ≥®ÊÑè„ÄÇ", luck: 79, e:"‚ú®"},
    {t:"Èùô„Åã„Å™ÂõûÂæ©", d:"ÁÑ°ÁêÜ„Åô„Çã„Å®Â¥©„Çå„Çã„ÄÇ„Ç≥„É≥„Éá„Ç£„Ç∑„Éß„É≥ÊúÄÂÑ™ÂÖà„ÄÇ", luck: 61, e:"ü´ß"},
    {t:"‰ºöË©±ÈÅã", d:"‰∏ÄË®Ä„Åß‰∫∫„ÅåÈõÜ„Åæ„Çã„ÄÇÊ±∫„ÇÅÂè∞Ë©û„ÇíÁî®ÊÑè„Åô„Çã„Å®Âº∑„ÅÑ„ÄÇ", luck: 70, e:"üí¨"},
    {t:"ÈõÜ‰∏≠„É¢„Éº„Éâ", d:"‰ΩúÊ•≠„Åå‰º∏„Å≥„ÇãÊó•„ÄÇÊï¥ÁêÜ„ÉªÂà∂‰Ωú„ÉªÈñãÁô∫„ÅåÈÄ≤„ÇÄ„ÄÇ", luck: 76, e:"üß†"},
    {t:"„Çπ„Éù„ÉÉ„Éà„É©„Ç§„Éà", d:"Ê≥®ÁõÆ„ÅåÈõÜ„Åæ„Çã„ÄÇ„ÅÜ„Å£„Åã„ÇäÁô∫Ë®Ä„Å†„ÅëÊ≥®ÊÑè„ÄÇ", luck: 73, e:"üéôÔ∏è"}
  ]
};

const tracks = [
  { label: "Manipulate", file: "Manipulate.mp3" },
  { label: "himituno_osyaberi", file: "himituno_osyaberi.mp3" },
  { label: "„Çà„Åµ„Åã„Åó„ÅØ00_59„Åæ„Åß", file: "„Çà„Åµ„Åã„Åó„ÅØ00_59„Åæ„Åß.wav" },
  { label: "„ÉÅ„Ç¢„Éï„É´„Éá„Ç§„Ç∫", file: "„ÉÅ„Ç¢„Éï„É´„Éá„Ç§„Ç∫.wav" },
  { label: "ÌÅ¨Î¶¨Ïä§ÎßàÏä§ Î∏åÍ∏à", file: "ÌÅ¨Î¶¨Ïä§ÎßàÏä§ Î∏åÍ∏à.wav" }
];

/* =========================
   ‚úÖ HELPERS
   ========================= */
const $ = (s)=>document.querySelector(s);
const clickSound = $("#clickSound");
function click(){
  clickSound.currentTime = 0;
  clickSound.play().catch(()=>{});
}

function xmur3(str){
  let h = 1779033703 ^ str.length;
  for (let i=0;i<str.length;i++){
    h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
    h = (h<<13) | (h>>>19);
  }
  return function(){
    h = Math.imul(h ^ (h>>>16), 2246822507);
    h = Math.imul(h ^ (h>>>13), 3266489909);
    h ^= h>>>16;
    return h>>>0;
  }
}
function mulberry32(a){
  return function(){
    let t = a += 0x6D2B79F5;
    t = Math.imul(t ^ (t>>>15), t|1);
    t ^= t + Math.imul(t ^ (t>>>7), t|61);
    return ((t ^ (t>>>14))>>>0) / 4294967296;
  }
}

/* LIVE NOW calc */
function getLiveNowInfo(weekObj){
  const now = new Date();
  const minutes = now.getHours()*60 + now.getMinutes();
  const jsDay = now.getDay(); // 0=Sun..6=Sat
  const todayIdx = (jsDay===0)?6:(jsDay-1);
  const prevIdx = (todayIdx+6)%7;

  // CHZZK 16-18
  if(minutes >= 16*60 && minutes < 18*60){
    if(weekObj.days[todayIdx]?.state === "live") return { idx: todayIdx, platform:"chzzk" };
  }
  // Twitch 23-24
  if(minutes >= 23*60){
    if(weekObj.days[todayIdx]?.state === "live") return { idx: todayIdx, platform:"twitch" };
  }
  // Twitch 00-02 (yesterday)
  if(minutes < 2*60){
    if(weekObj.days[prevIdx]?.state === "live") return { idx: prevIdx, platform:"twitch" };
  }
  return null;
}

/* =========================
   ‚úÖ RENDER
   ========================= */
let lang = localStorage.getItem("irev_lang") || "ko";
let week = localStorage.getItem("irev_week") || "A";

function setTheme(theme){
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem("irev_theme", theme);
  $("#themeBtn").textContent = theme==="dark" ? "‚òÄÔ∏è" : "üåô";
}

function renderAll(){
  const t = i18n[lang];

  $("#brandTop").textContent = t.brandTop;
  $("#brandSub").textContent = t.brandSub;
  $("#scrollText").textContent = t.scroll;

  $("#heroTitle").textContent = t.heroTitle;
  $("#heroSub").textContent = t.heroSub;

  $("#meta1Title").textContent = t.meta1Title;
  $("#meta1Body").innerHTML = t.meta1Body.replaceAll("\n","<br>");
  $("#meta2Title").textContent = t.meta2Title;
  $("#meta2Body").textContent = t.meta2Body;
  $("#meta3Title").textContent = t.meta3Title;
  $("#meta3Body").textContent = t.meta3Body;

  $("#hotTicker").textContent = t.hotTicker;

  // menu
  $("#mTop").textContent = t.menu.top;
  $("#mNews").textContent = t.menu.news;
  $("#mSchedule").textContent = t.menu.schedule;
  $("#mRules").textContent = t.menu.rules;
  $("#mLuck").textContent = t.menu.luck;
  $("#mRp").textContent = t.menu.rp;
  $("#mLinks").textContent = t.menu.links;

  // subs
  $("#newsSub").textContent = t.subs.news;
  $("#scheduleSub").textContent = t.subs.schedule;
  $("#rulesSub").textContent = t.subs.rules;
  $("#fortuneSub").textContent = t.subs.fortune;
  $("#rpSub").textContent = t.subs.rp;
  $("#linksSub").textContent = t.subs.links;

  // news
  $("#newsList").innerHTML = t.news.map(n=>`
    <li>
      <div class="tag">${n.tag}</div>
      <div>
        <div class="title">${n.title}</div>
        <div class="desc">${n.desc}</div>
      </div>
    </li>
  `).join("");

  // schedule info
  $("#schInfoTitle").textContent = t.schedule.infoTitle;
  $("#schInfoBody").innerHTML = t.schedule.infoBody.replaceAll("\n","<br>");
  $("#schFooter").textContent = t.schedule.footer;
  $("#schWeekTitle").textContent = "WEEK";

  // week buttons
  $("#weekA").textContent = t.schedule.weekA.label;
  $("#weekB").textContent = t.schedule.weekB.label;
  $("#weekA").classList.toggle("active", week==="A");
  $("#weekB").classList.toggle("active", week==="B");

  // schedule grid
  const weekObj = (week==="B") ? t.schedule.weekB : t.schedule.weekA;
  const now = new Date();
  const jsDay = now.getDay();
  const todayIdx = (jsDay===0)?6:(jsDay-1);
  const liveNow = getLiveNowInfo(weekObj);

  $("#scheduleGrid").innerHTML = weekObj.days.map((d, idx)=>{
    const isToday = idx===todayIdx;
    const isNow = liveNow && liveNow.idx===idx;
    const stateLabel = t.schedule.labels[d.state];
    const nowBadge = isNow ? `<span class="badge now">${t.schedule.now} ¬∑ ${t.schedule.platform[liveNow.platform]}</span>` : "";
    return `
      <div class="day-row ${isToday?'today':''}">
        <div class="day-name">${d.day}</div>
        <div class="badges">
          <span class="badge ${d.state}">${stateLabel}</span>
          ${nowBadge}
        </div>
      </div>
    `;
  }).join("");

  // rules
  $("#rulesTitle").textContent = t.rules.title;
  $("#rulesDesc").textContent = t.rules.desc;
  $("#rulesList").innerHTML = t.rules.list.map(x=>`<li>${x}</li>`).join("");
  $("#rulesFooter").textContent = t.rules.footer;

  // fortune
  $("#fortuneTitle").textContent = t.fortune.title;
  $("#fortuneDesc").textContent = t.fortune.desc;
  $("#fortuneFooter").textContent = t.fortune.footer;
  $("#fortuneBtn").textContent = t.fortune.btn;

  const ddd = new Date();
  const yyyy = ddd.getFullYear();
  const mm = String(ddd.getMonth()+1).padStart(2,"0");
  const dd = String(ddd.getDate()).padStart(2,"0");
  const dateKey = `${yyyy}-${mm}-${dd}`;
  $("#fortuneDate").textContent = dateKey;

  const savedKey = `irev_fortune_${lang}_${dateKey}`;
  const saved = localStorage.getItem(savedKey);
  if(saved){
    try{ showFortune(JSON.parse(saved)); }catch{}
  }else{
    $("#fortuneResult").textContent = "";
    $("#luckFill").style.width = "0%";
    $("#luckLabel").textContent = `${t.fortune.luckLabel} : 0%`;
  }

  // rp
  $("#rpTitle").textContent = t.rp.title;
  $("#formsTitle").textContent = t.rp.forms;
  $("#rpText").textContent = t.rp.text;
  $("#rpStream").textContent = t.rp.stream;
  $("#slimeLabel").textContent = t.rp.slime;
  $("#humanLabel").textContent = t.rp.human;

  // lang selector
  $("#lang").value = lang;
}

/* Fortune */
function pickFortune(){
  const now = new Date();
  const yyyy = now.getFullYear();
  const mm = String(now.getMonth()+1).padStart(2,"0");
  const dd = String(now.getDate()).padStart(2,"0");
  const dateKey = `${yyyy}-${mm}-${dd}`;
  const seedFn = xmur3(`${lang}-${dateKey}-Irev`);
  const rand = mulberry32(seedFn());
  const list = fortunes[lang];
  const idx = Math.floor(rand() * list.length);
  const base = list[idx].luck;
  const jitter = Math.floor((rand()*12)-6);
  const luck = Math.max(5, Math.min(95, base+jitter));
  return { ...list[idx], luck, date: dateKey };
}
function showFortune(obj){
  $("#fortuneResult").textContent = `${obj.e}  ${obj.t}\n${obj.d}`;
  requestAnimationFrame(()=>{
    $("#luckFill").style.width = `${obj.luck}%`;
    $("#luckLabel").textContent = `${i18n[lang].fortune.luckLabel} : ${obj.luck}%`;
  });
}

/* BGM */
const bgm = $("#bgm");
bgm.volume = 0.28;

function populateTracks(){
  $("#track").innerHTML = tracks.map(t=>`<option value="${t.file}">${t.label}</option>`).join("");
}
function setTrack(file, autoplay=false){
  if(!file) return;
  bgm.src = file;
  localStorage.setItem("irev_track", file);
  if(autoplay){
    bgm.play().then(()=>{}).catch(()=>{});
  }
}

/* Menu */
function openMenu(){
  $("#menu").classList.add("open");
  $("#menu").setAttribute("aria-hidden","false");
}
function closeMenu(){
  $("#menu").classList.remove("open");
  $("#menu").setAttribute("aria-hidden","true");
}

/* Scroll hint hide on scroll a bit */
function updateScrollHint(){
  const y = window.scrollY || 0;
  $("#scrollHint").style.opacity = y > 120 ? "0" : "0.95";
}

/* =========================
   ‚úÖ EVENTS
   ========================= */
$("#menuBtn").addEventListener("click", ()=>{ click(); openMenu(); });
$("#menuClose").addEventListener("click", ()=>{ click(); closeMenu(); });
$("#menu").addEventListener("click", (e)=>{ if(e.target.id==="menu"){ closeMenu(); }});
document.addEventListener("keydown",(e)=>{ if(e.key==="Escape") closeMenu(); });

document.querySelectorAll(".menu-link").forEach(a=>{
  a.addEventListener("click", ()=>{ closeMenu(); });
});

$("#lang").addEventListener("change", ()=>{
  click();
  lang = $("#lang").value;
  localStorage.setItem("irev_lang", lang);
  renderAll();
});

$("#weekA").addEventListener("click", ()=>{
  click(); week="A"; localStorage.setItem("irev_week", week); renderAll();
});
$("#weekB").addEventListener("click", ()=>{
  click(); week="B"; localStorage.setItem("irev_week", week); renderAll();
});

$("#fortuneBtn").addEventListener("click", ()=>{
  click();
  const obj = pickFortune();
  showFortune(obj);
  localStorage.setItem(`irev_fortune_${lang}_${obj.date}`, JSON.stringify(obj));
});

$("#themeBtn").addEventListener("click", ()=>{
  click();
  const cur = document.documentElement.getAttribute("data-theme") || "dark";
  setTheme(cur==="dark" ? "light" : "dark");
});

populateTracks();
$("#track").addEventListener("change", ()=>{
  click();
  setTrack($("#track").value, true);
});

$("#bgmBtn").addEventListener("click", ()=>{
  click();
  if(bgm.paused){
    bgm.play().catch(()=>{});
  }else{
    bgm.pause();
  }
});

/* =========================
   ‚úÖ INIT
   ========================= */
window.addEventListener("load", async ()=>{
  // theme
  const savedTheme = localStorage.getItem("irev_theme") || "dark";
  setTheme(savedTheme);

  // tracks
  const savedTrack = localStorage.getItem("irev_track") || tracks[0].file;
  $("#track").value = savedTrack;
  setTrack(savedTrack, false);

  // render
  renderAll();

  // loader out
  setTimeout(()=> $("#loader").classList.add("hide"), 220);

  // try autoplay (may be blocked)
  try{ await bgm.play(); }catch(e){}

  // live now refresh
  setInterval(renderAll, 60*1000);

  // scroll hint
  updateScrollHint();
});
window.addEventListener("scroll", updateScrollHint);
</script>
</body>
</html>
